{"version":3,"sources":["../../src/pages/miplan/miplan.module.ts","../../src/pages/miplan/miplan.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MiplanPage } from './miplan';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { TooltipsModule } from 'ionic-tooltips';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MiplanPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MiplanPage),\r\n    TooltipsModule.forRoot(),\r\n    ComponentsModule\r\n  ],\r\n})\r\nexport class MiplanPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/miplan/miplan.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Checkbox } from 'ionic-angular';\r\nimport { UserDataProvider, userd } from '../../providers/user-data/user-data';\r\nimport { PlanesDataProvider } from '../../providers/planes-data/planes-data';\r\nimport { PermissionsProvider } from '../../providers/permissions/permissions';\r\nimport { SubscriptionDataProvider } from '../../providers/subscription-data/subscription-data';\r\nimport { AlertProvider } from '../../providers/alert/alert';\r\nimport { planes } from '../../providers/user-data/planes';\r\nimport { LoaderProvider } from '../../providers/loader/loader';\r\nimport { SubscriptionManagerProvider } from '../../providers/subscription-manager/subscription-manager';\r\nimport { sources } from '../../providers/user-data/sources';\r\nimport { ConektaComponent } from '../../components/conekta/conekta'\r\nimport { BaseUrlProvider } from '../../providers/base-url/base-url';\r\n\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { subscriptions } from '../../providers/user-data/subscriptions';\r\nimport { SubusersDataProvider } from '../../providers/subusers-data/subusers-data';\r\nimport { SubusersManagerProvider } from '../../providers/subusers-manager/subusers-manager';\r\nimport { WsMessengerProvider } from '../../providers/ws-messenger/ws-messenger';\r\nimport { DateProvider } from '../../providers/date/date';\r\n\r\ndeclare var Stripe;\r\n\r\n\r\n/**\r\n * Generated class for the MiplanPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-miplan',\r\n  templateUrl: 'miplan.html',\r\n})\r\nexport class MiplanPage {\r\n  /** Things from stripe from register-modal **/\r\n  //stripe = Stripe('pk_test_4CJTbKZki9tC21cGTx4rLPLO');\r\n  card: any;\r\n\r\n  sources:sources[] = new Array();\r\n  selected_source:sources = null;\r\n\r\n  onplanchange:boolean = false;\r\n  selectedPlan= null; //cargar selected plan\r\n  selectedPlanObject:planes = null; //objeto del plan seleccionado para suscripcion.\r\n\r\n  selectedAditionals = 0;\r\n  selectedAditionalsDocs = 0;\r\n  selectedMethod = null;\r\n\r\n  cantcancel = false;\r\n\r\n  isgroup:boolean = false;\r\n\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public userData: UserDataProvider,\r\n    public permissions: PermissionsProvider,\r\n    public planesData: PlanesDataProvider,\r\n    public subsData: SubscriptionDataProvider,\r\n    public alert:AlertProvider,\r\n    public loader:LoaderProvider,\r\n    public subsManager: SubscriptionManagerProvider,\r\n    public conekta: ConektaComponent,\r\n    public bu: BaseUrlProvider,\r\n    public http: HttpClient,\r\n    public subuserData: SubusersDataProvider,\r\n    public subuserMan: SubusersManagerProvider,\r\n    public wsMessenger: WsMessengerProvider\r\n  ) {\r\n    //conekta.init('https://cdn.conekta.io/js/latest/conekta.js','key_FSKYyuv2qSAEryHAMM7K1dA').then((c) => {\r\n      conekta.init('https://cdn.conekta.io/js/latest/conekta.js','key_GtbbRJpEKq8zTrtq3EPCTqQ').then((c) => {\r\n      \r\n      //Este success se ejecuta con el javascript se cargó correctamente\r\n      console.log(c);\r\n    }).catch((err) => {\r\n      //Este error se ejecuta cuando el javascript no cargó, Ej. Error de conexión\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n  get cantidad(){ return this.subsData.checkForSub() ? Number(this.subsData.subscription.field_cantidad) : 0; }\r\n  get nextCobro(){ /*console.log('nextcobro',this.subsData.subscription.field_next_cobro);*/\r\n  let ret = '';\r\n  if(this.subsData.checkForSub() && this.subsData.subscription.field_next_cobro){\r\n    //console.log('trailnextcobro field ',this.subsData.subscription.field_next_cobro);\r\n    //console.log('trailnextcobro date',new Date(Number(this.subsData.subscription.field_next_cobro)*1000));\r\n    let auxdate = new Date(Number(this.subsData.subscription.field_next_cobro)*1000);\r\n    let aux_dispdates = DateProvider.getDisplayableDates(auxdate);\r\n    ret = aux_dispdates.date;\r\n  }\r\n  return ret;\r\n  \r\n   }\r\n  get subAdicionales(){  return this.subsData.checkForSub() ? Number(this.subsData.subscription.field_adicionales) : 0;  }\r\n  get docAdicionales(){  return this.subsData.checkForSub() ? Number(this.subsData.subscription.field_docsadicionales) : 0;  }\r\n  get subPlan(){ return this.subsData.checkForSub() ? Number(this.subsData.subscription.field_plan_sus) : 0;  }\r\n\r\n\r\n  get accountsLeft(){\r\n    return (12 + this.selectedAditionals) - this.subuserData.selectedForGroupNum;\r\n  }\r\n\r\n  get PLAN_GROUP():number{ return this.subsData.PLAN_GROUP; }\r\n  get PLAN_ANY():number{ return this.subsData.PLAN_ANY; }\r\n  \r\n\r\n  checkIs( nid, plan ){\r\n    return Number(nid) === Number(plan);\r\n  }\r\n\r\n  get selectedTotal():number{\r\n    let ret = 0;\r\n    if(this.onplanchange){ \r\n      ret = this.getTotal_onChangePlan(); \r\n  } else{\r\n      ret = this.getTotal_noChangePlan();\r\n  }\r\n  return ret;\r\n  }\r\n\r\n  getTotal_onChangePlan(){\r\n    let ret:number = 0;\r\n    if(this.onplanchange){\r\n      let plan_costo:number = 0;\r\n      if(this.selectedPlan){\r\n        let selected_plan = this.planesData.getPlanById(this.selectedPlan);\r\n        if(selected_plan){\r\n        plan_costo = Number(selected_plan.field_costo);\r\n        this.isgroup = ( Number(selected_plan.nid) === Number(SubscriptionDataProvider.PLAN_GROUP) ) ? true : false;\r\n          console.log('this.isgroup',this.isgroup);\r\n        }\r\n      }\r\n      ret = plan_costo;\r\n      if(this.selectedAditionals > 0 ){\r\n        ret += Number(this.selectedAditionals*SubscriptionDataProvider.EXTRA_SUB);\r\n      }\r\n      if(this.selectedAditionalsDocs > 0 && this.isgroup){\r\n        ret += Number(this.selectedAditionalsDocs*SubscriptionDataProvider.EXTRA_DOC);\r\n      }\r\n     /* if(this.subsData.subscription){\r\n      ret += Number(this.subsData.subscription.field_adicionales*40);\r\n    }*/\r\n    }\r\n    return ret;\r\n    }\r\n\r\n    getTotal_noChangePlan(){\r\n      let ret:number = 0;\r\n      if(!this.onplanchange && this.subsData.subscription && this.subsData.subscription.field_cantidad){\r\n        ret += Number((this.subsData.subscription.field_cantidad));\r\n      }\r\n      return ret;\r\n    }\r\n  \r\n  \r\n    onChangeUsers(element: Checkbox, subuser:userd){\r\n      let setTo = !subuser.selectedForGroup;\r\n     \r\n      if(setTo && this.accountsLeft > 0){ \r\n       element.checked = subuser.selectedForGroup = true;\r\n      }else{\r\n        element.checked = subuser.selectedForGroup = false;\r\n      }\r\n    }\r\n\r\n    checkIfisgroupPlan(plan:planes){\r\n     return Number(plan.nid) === Number(SubscriptionDataProvider.PLAN_GROUP);;\r\n    }\r\n\r\n\r\n    /***/\r\n    async baja(){\r\n      this.alert.chooseAlert(\r\n        'Cancelar suscripción',\r\n        '¿Estás seguro que deseas cancelar tu suscripción?, Si cancelas tu suscripción no podras acceder a tus citas, servicios y reportes.',\r\n        async ()=>{ /*console.log('AQUI HAY QUE CANCELAR LA SUSCRIPCION')*/\r\n        if(this.subsManager.checkForSubscription()){\r\n          let ret = await this.subsManager.deletesSus(this.subsData.subscription).toPromise();\r\n          console.log('cancel ret is',ret);\r\n          if(ret){\r\n            console.log('location reload here');\r\n            this.bu.locationReload();\r\n          }\r\n        }\r\n      },\r\n        ()=>{ console.log('se cancelo'); }\r\n      );\r\n    }\r\n\r\n  /*ERROR Y SUCCESS CONEKTA*/\r\n  async successToken(token:any){\r\n    //Esta función se agrega al atributo (successToken) para recibir el resultado de generar el token\r\n    let cu_src_data = {\r\n      id: token.id,\r\n      last4: token.cardNumber,\r\n      client_secret: token.id,\r\n      brand: token.brand\r\n    };\r\n    let info = {\r\n      \"action\":\"add\",\r\n      \"data\":{\r\n        \"token\":token.id\r\n      }\r\n    };\r\n    this.http.post(this.bu.endpointUrl+'payment_methods',info).subscribe( (res:any) => {\r\n      if(res!=null){\r\n        this.selectedMethod = res.default_payment_source_id;\r\n        //this.setdefaultPaymentSource(res.default_payment_source_id);\r\n        this.parseSources(res);\r\n      }else{\r\n        this.selectedMethod = null;\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  errorToken(error:any){\r\n    //Esta función se agrega al atributo (errorToken) para recibir lo errores al momento de generar un token\r\n    console.log(error);\r\n    let alerta = this.alert.alertCtrl.create({\r\n      title: \"Error\",\r\n      subTitle: error.message_to_purchaser,\r\n      buttons: [\"OK\"]\r\n    });\r\n    alerta.present();\r\n  }\r\n  /*FIN ERROR Y SUCCESS CONEKTA*/\r\n\r\n  \r\n  ionViewDidEnter(){\r\n    console.log('ionViewDidEnter miplan.ts');\r\n    //this.setupStripe();\r\n    this.loadSources();\r\n  }\r\n\r\n\r\n  calculateCostoOnChange():number{\r\n    let ret = 0;\r\n    if(this.onplanchange){\r\n\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad MiplanPage');\r\n    console.log('planesdata is',this.planesData.planes);\r\n    console.log('my sub is',this.subsData.subscription);\r\n    this.subuserMan.cargarSubusuarios();\r\n    if(!this.permissions.checkUserSuscription([this.userData.PLAN_ANY])){\r\n      this.activateChangePlanMode();\r\n      this.cantcancel = true;\r\n    }else{\r\n      this.onplanchange = false;\r\n      this.selectedPlan = this.subPlan;\r\n      this.selectedPlanObject = this.planesData.getPlanById(this.selectedPlan);\r\n    }\r\n  }\r\n\r\n  activateChangePlanMode(){\r\n    //this.setupStripe();\r\n    console.log(' this.subsData.subscription', this.subsData.subscription);\r\n    this.selectedAditionals =  this.subAdicionales;\r\n    this.selectedAditionalsDocs =  this.docAdicionales;\r\n    this.onplanchange = true;\r\n    this.loadSources();\r\n  }\r\n\r\n  editar(){\r\n    console.log('change to onplanchange true');\r\n    this.activateChangePlanMode();\r\n  }\r\n\r\n  async guardar(){\r\n    console.log('trail2 saving to  onplanchange false',this.selectedPlan,this.subsData.isGroup);\r\n    if(!this.guardar_basic_validation()) return false;\r\n    if(!this.guardar_subusernumber_validation()) return false;\r\n    if( !this.subsData.isGroup  && Number(this.selectedPlan) === Number(SubscriptionDataProvider.PLAN_GROUP)){\r\n      console.log('trail2 entrando a grrupo y no es grupo');\r\n      await this.subsManager.group_enter_selectedSubusersClean(this.subuserData.selectedForGroup,this.subsData.subscription);\r\n      console.log('trail2 docs to reload',this.subsManager.aux_docstoReload);\r\n      let view = this;\r\n      view.wsMessenger.generateSuboutofgroup(view.subsManager.aux_docstoReload,1);\r\n    }\r\n    \r\n    await this.suscribirse();\r\n    this.onplanchange = false;\r\n  }  \r\n\r\n  guardar_basic_validation():boolean{\r\n    let ret = true;\r\n    console.log('guardar_basic_validation',this.selectedPlan);\r\n    if(!this.selectedPlan){  ret = false; this.alert.presentAlert('Error','Es necesario seleccionar un plan'); }else{\r\n      this.selectedPlanObject = this.planesData.getPlanById(this.selectedPlan);\r\n    }\r\n    console.log('guardar_basic_validation ret',ret);\r\n    if(!this.selectedMethod){ ret = false; this.alert.presentAlert('Error','Es necesario seleccionar un Método de Pago'); }\r\n    return ret;\r\n  }\r\n\r\n  guardar_subusernumber_validation():boolean{\r\n    let ret = true;\r\n    console.log('guardar_subusernumber_validation',this.selectedAditionals,this.subsData.getSubAccountsTotal());\r\n    if((this.selectedAditionals + this.subsData.getplanAccounts()) < this.subsData.getUsedSubAccounts()){\r\n     console.log('no suficientes espacios mija');\r\n     ret = false;\r\n     //title, msg, inputs, inputcallback, cancelCallback\r\n     this.alert.setStrings('Usuarios','Cancelar');\r\n     this.alert.chooseAlert('Error','No puedes reducir tus usuarios adicionales por debajo del numero de usuarios con los que cuentas actualmente.',\r\n    ()=>{\r\n      this.alert.resetStrings();\r\n      this.navCtrl.setRoot('UsuariosPage');\r\n    },()=>{\r\n      this.alert.resetStrings();\r\n    });\r\n  \r\n    }\r\n    return ret;\r\n  }\r\n\r\n  guardar_docnumber_validation(){\r\n    let ret = true;\r\n    console.log('guardar_docnumber_validation',this.selectedAditionalsDocs,this.subsData.getDocAccountsTotal());\r\n    if((this.selectedAditionalsDocs + this.subsData.getplanDocAccounts()) < this.subsData.getUsedDocAccounts()){\r\n     console.log('no suficientes espacios mija');\r\n     ret = false;\r\n     //title, msg, inputs, inputcallback, cancelCallback\r\n     this.alert.setStrings('Grupo','Cancelar');\r\n     this.alert.chooseAlert('Error','No puedes reducir tus doctores adicionales por debajo del numero de doctores con los que cuentas actualmente.',\r\n    ()=>{\r\n      this.alert.resetStrings();\r\n      this.navCtrl.setRoot('GroupPage');\r\n    },()=>{\r\n      this.alert.resetStrings();\r\n    });\r\n  \r\n    }\r\n    return ret;\r\n  }\r\n\r\n  cancelar(){\r\n    console.log('canceling to onplanchange false');\r\n    this.onplanchange = false;\r\n  }\r\n\r\n  operateExtra(operand:number){\r\n    console.log('operateExtra',operand);\r\n    this.selectedAditionals += operand;\r\n    if (this.selectedAditionals < 0) this.selectedAditionals = 0;\r\n    console.log('aditionals are',this.selectedAditionals);\r\n  }\r\n\r\n  \r\n  operateExtraDoc(operand:number){\r\n    console.log('operateExtra',operand);\r\n    this.selectedAditionalsDocs += operand;\r\n    if (this.selectedAditionalsDocs < 0) this.selectedAditionalsDocs = 0;\r\n    console.log('aditionals are',this.selectedAditionalsDocs);\r\n  }\r\n\r\n\r\n\r\n  async suscribirse(){\r\n    console.log('suscribirse start');\r\n    if(!this.enabledButton()) return false;\r\n    this.loader.presentLoader('Subscribiendo ...');\r\n    console.log('suscribirse this.selectedMethod',this.selectedMethod);\r\n    console.log('suscribirse this.selectedPlanObject',this.selectedPlanObject);\r\n    //Tengo para crear una suscripcion, pero no para editar una suscripcion. vamos a hacer un codigo para editar suscripcion.\r\n    //must set custom price.\r\n    \r\n    if(this.subsManager.checkForSubscription()){ \r\n      console.log('checked for subs did tru');\r\n      this.subsData.subscription.field_cantidad = this.selectedTotal;\r\n      this.subsData.subscription.field_plan_sus = this.selectedPlan\r\n      this.subsData.subscription.field_adicionales = Number(this.selectedAditionals);\r\n      if(this.isgroup)this.subsData.subscription.field_docsadicionales = Number(this.selectedAditionalsDocs);\r\n      let ret = await this.subsManager.updateSus(this.subsData.subscription).toPromise();\r\n      this.loader.dismissLoader();\r\n      console.log('sus udate returned',ret);\r\n      this.bu.locationReload();\r\n    }else{\r\n      console.log('akiwe');\r\n      let aux_sus = subscriptions.getEmptySuscription();\r\n      aux_sus.field_cantidad = this.selectedTotal;\r\n      aux_sus.field_plan_sus = this.selectedPlan;\r\n      aux_sus.field_adicionales = Number(this.selectedAditionals);\r\n      if(this.isgroup)aux_sus.field_adicionales = Number(this.selectedAditionalsDocs);\r\n      await this.subsManager.subscribe( this.selectedPlanObject, aux_sus);\r\n      this.loader.dismissLoader();\r\n      this.bu.locationReload();\r\n    }\r\n   \r\n    \r\n    \r\n  }\r\n\r\n  gotoentergroup(){\r\n    console.log('entering enter group page');\r\n    this.navCtrl.setRoot('EntergrupoPage');\r\n  }\r\n\r\n  /*STRIPE METHODS*/\r\n\r\n  checkStripeSetup(){\r\n    let ret = (\r\n      this.onplanchange && \r\n      this.userData.checkUserPermission([UserDataProvider.TIPO_DOCTOR]) \r\n      /*&& ( this.subsData.subscription === null || this.subsData.subscription.plan === null)*/\r\n      );\r\n      return ret;\r\n  }\r\n\r\n\r\n  /*setupStripe(){\r\n    console.log('setting stripe');\r\n    if(this.checkStripeSetup()){\r\n      console.log(' stripe checked and needed');\r\n    let elements = this.stripe.elements();\r\n    var style = {\r\n      base: {\r\n        color: '#32325d',\r\n        lineHeight: '24px',\r\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\r\n        fontSmoothing: 'antialiased',\r\n        fontSize: '16px',\r\n        '::placeholder': {\r\n          color: '#aab7c4'\r\n        }\r\n      },\r\n      invalid: {\r\n        color: '#fa755a',\r\n        iconColor: '#fa755a'\r\n      }\r\n    };\r\n    console.log('LF card elements');\r\n    this.card = elements.create('card', { style: style });\r\n    //let crd = document.getElementById(\"card-element\");\r\n    //Debugger.log([crd]);\r\n    this.card.mount('#card-element');\r\n    this.card.addEventListener('change', event => {\r\n      var displayError = document.getElementById('card-errors');\r\n      if (event.error) {\r\n        displayError.textContent = event.error.message;\r\n      } else {\r\n        displayError.textContent = '';\r\n      }\r\n    });\r\n\r\n    var form = document.getElementById('payment-form');\r\n    form.addEventListener('submit', event => {\r\n      event.preventDefault();\r\n      if(!this.enabledButton) return false;\r\n      this.loader.presentLoader('Agregando tarjeta...');\r\n      this.stripe.createSource(this.card).then( async result => {\r\n        if (result.error) {\r\n          var errorElement = document.getElementById('card-errors');\r\n          errorElement.textContent = result.error.message;\r\n          this.loader.dismissLoader();\r\n          return false;\r\n        } else {\r\n          let cu_src_data = {\r\n                            id:result.source.id,\r\n                            last4:result.source.card.last4,\r\n                            client_secret:result.source.client_secret,\r\n                            brand:result.source.card.brand\r\n                            };\r\n          this.userData.userData.field_src_json_info['und'].push({value: JSON.stringify(cu_src_data)});\r\n        }\r\n        //let updateUser_res =  /await this.userData.updateUser().subscribe((val)=>{ console.log(val);},(error)=>{ console.log(error) });\r\n        let updateUser_res = await this.userData.updateUser().toPromise();\r\n        this.loadSources();\r\n\r\n        if(!this.enabledButton) return false;\r\n        //await this.subsManager.subscribe( this.selectedPlanObject,this.selected_source);\r\n        window.location.reload();\r\n        \r\n        });\r\n      });\r\n    }\r\n  }*/\r\n\r\nloadSources(){\r\n  console.log(this.bu.endpointUrl+'payment_methods/'+this.userData.userData.uid);\r\n  this.http.get(this.bu.endpointUrl+'payment_methods/'+this.userData.userData.uid).subscribe( (res:any) => {\r\n    if(res!=null){\r\n      this.selectedMethod = res.default_payment_source_id;\r\n      this.parseSources(res);\r\n    }\r\n  });\r\n  //Debugger.log(['loading srcs']);\r\n  /*let old_selected = this.selected_source;\r\n  this.sources = new Array();\r\n  for(let i = 0; i < this.userData.userData.field_src_json_info.und.length; i++){\r\n    let new_source = new sources();\r\n    new_source.setData(this.userData.userData.field_src_json_info.und[i]);\r\n    this.sources.push(new_source);\r\n    if(old_selected !== null && new_source.src_id === old_selected.src_id){ this.selected_source = new_source; this.selected_source.set_selected()}\r\n    else  if(old_selected === null ){ this.selected_source = new_source; this.selected_source.set_selected()}\r\n  }*/\r\n}\r\n\r\nparseSources(src){\r\n  console.log(src.data);\r\n  this.sources = src.data;\r\n}\r\n\r\nremoveCard(index,card){\r\n  let alerta = this.alert.alertCtrl.create({\r\n    title: \"Eliminar tarjeta\",\r\n    message:\"¿Desea eliminar esta tarjeta?\",\r\n    buttons: [\r\n      {\r\n        text: \"Cancelar\",\r\n        role: \"cancel\",\r\n        handler: () =>  {\r\n          console.log('se canceló')\r\n        }\r\n      },\r\n      {\r\n        text: \"Eliminar\",\r\n        handler: () => {\r\n          let info = {\r\n            \"action\":\"delete\",\r\n            \"data\":{\r\n              \"position\":index\r\n            }\r\n          };\r\n          this.http.post(this.bu.endpointUrl+'payment_methods',info).subscribe( (res:any) => {\r\n            if(res!=null){\r\n              this.selectedMethod = res.default_payment_source_id;\r\n              this.parseSources(res);\r\n            }else{\r\n              this.selectedMethod = null;\r\n              this.sources = [];\r\n            }\r\n          });\r\n        }\r\n      }\r\n    ]\r\n  });\r\n  alerta.present();\r\n}\r\n\r\nselectCard( input_src:any ){\r\n  let alerta = this.alert.alertCtrl.create({\r\n    title: \"Confirmar tarjeta\",\r\n    subTitle:\"¿Desea asignar esta tarjeta como predeterminada?\",\r\n    message: \"Todos sus pagos se realizarán por defecto con esta tarjeta.\",\r\n    buttons: [\r\n      {\r\n        text: \"Cancelar\",\r\n        role: \"cancel\",\r\n        handler: () =>  {\r\n          console.log('se canceló')\r\n        }\r\n      },\r\n      {\r\n        text: \"Predeterminar\",\r\n        handler: () => {\r\n          let info = {\r\n            \"action\":\"update\",\r\n            \"data\":{\r\n              \"source\":input_src.id\r\n            }\r\n          };\r\n          this.http.post(this.bu.endpointUrl+'payment_methods',info).subscribe( (res:any) => {\r\n            if(res!=null){\r\n              this.selectedMethod = res.default_payment_source_id;\r\n              this.parseSources(res);\r\n            }else{\r\n              this.selectedMethod = null;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    ]\r\n  });\r\n  alerta.present();\r\n}\r\n\r\n\r\n  enabledButton():boolean{\r\n    console.log('enabledButton',this.selectedPlan !== null);\r\n    //return this.selected_source !== null && this.selected_plan !== null;\r\n    return this.selectedPlan !== null;\r\n  }\r\n\r\n  \r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/miplan/miplan.ts"],"sourceRoot":""}