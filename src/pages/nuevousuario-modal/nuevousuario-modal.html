<!--
  Generated template for the NuevousuarioModalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-content padding>
    <div class="modal_closer" (click)="this.dismiss();">Volver</div>
    <div class="modalPage_header" *ngIf="!this.tutorial.checkTutorialState()">
        <div class="modalPage_logo"><img src="assets/imgs/usuarios.svg"/></div>
        <div class="modalPage_title">
          <span *ngIf="this.isnew" class="spanBlock largeFont"><b>Alta de Usuario</b></span>
          <span *ngIf="!this.isnew" class="spanBlock largeFont"><b>Editar Usuario {{this.newUser.name}}</b></span>
        </div>
    </div>

    <div class="modalPage_header justify_center" *ngIf="this.tutorial.checkTutorialState() && initialpage" >
            <div class="modalPage_logo"><img src="assets/imgs/usuarios.svg"/></div>
            <span class=" largeFont" *ngIf="this.isnew"><b>Alta de Usuario</b></span>
        </div>

    <div class="user_explain" *ngIf="this.tutorial.checkTutorialState() && initialpage && this.tutorial.usuarioCreated === false" ><!-- Drap agregar usuarios explicacion block-->
        <span class="spanBlock midSubFont">Drap te permite crear tres tipos de subusuarios:</span>
        <div class="trisectional">
            <div class="trisectional_section"> <span class="spanBlock fontPrimary midSubFont bold">Recepción:</span><span class="spanBlock midSubFont">Crea Citas</span></div>
            <div class="trisectional_section"> <span class="spanBlock fontPrimary midSubFont bold">Caja:</span><span class="spanBlock midSubFont">Crea Citas</span></div>
            <div class="trisectional_section"> <span class="spanBlock fontPrimary midSubFont bold">Caja & Recepción:</span><span class="spanBlock midSubFont">Crea y Cobra Citas</span></div>
        </div>
    </div>

    <div class="user_tutorial_selection" *ngIf="this.tutorial.checkTutorialState() && initialpage && this.tutorial.usuarioCreated === false">
        <span class="spanBlock midSubFont">Seleccione el que mejor describe su situacion</span>
        <div class="bisectional">
            <div class="bisectional_section" (click)="selectOption(2)"  [class.selectedOption]="checkSelectedOption(2)">
                <span class="spanBlock"> ¿Tienes un empleado para caja y otro para recepción?</span>
                <span class="spanBlock"> Crea dos usuarios para <span class="fontPrimary">Caja</span> y <span class="fontPrimary">Recepción</span> </span>
            </div>
            <div class="bisectional_section"  (click)="selectOption(1)" [class.selectedOption]="checkSelectedOption(1)">
                <span class="spanBlock"> ¿Tienes un solo empleado que funciona como caja y recepción?</span>
                <span class="spanBlock"> Crea un usuario de <span class="fontPrimary">Caja & Recepción</span></span>
            </div>

        </div>
        <div class="buttonsection">
            <button class="generalButton bgColorSecondary"[class.disabledsubbtn]="!isSelectedOption" [disabled]="!isSelectedOption()" (click)="userTutorialStart()">Continuar</button>
        </div>
    </div>

    


    <div class="modalContent">
      <div class="alta_main" *ngIf="initialpage && !this.tutorial.checkTutorialState()"  >
        <span class="spanBlock midSubFont">Busca usuarios compartidos o registra uno nuevo</span>
        <span class="spanBlock"> <button class="bgColorSecondary generalButton" (click)="codeuser=true; initialpage=false;">Buscar Usuario</button></span>
        <span class="spanBlock" *ngIf="this.userData.checkUserPlanHolder()"> <button class="bgColorSecondary generalButton" (click)="newuser=true; initialpage=false;">Registrar Nuevo</button></span>
      </div>
    <div class="nuevoservicio_content modalContent" *ngIf="codeuser">
        <span class="spanBlock optionspan" (click)="gobackuser()" > atras </span>
        <div class="ModalInput_input">
            <b>Introducir Código</b>
            <input  [(ngModel)]="this.newUserCode" type="text"/>
        </div>
        <div class="midAlign">
            <div class="register_button_section">
            <button (click)="getUserByCode()" class="bgColorSecondary generalButton">Buscar</button>
            </div>
          </div>
    </div>
    <div class="nuevoservicio_content modalContent" *ngIf="this.newuser">
            <span class="spanBlock optionspan" (click)="gobackuser()" *ngIf="!this.tutorial.checkTutorialState()"> atras </span>
            <span class="tutorial_explain_text" *ngIf="this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_CAJA"> Crea un usuario para caja. </span>
            <span class="tutorial_explain_text" *ngIf="this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_RECEPCION"> Crea un usuario para Recepción. </span>
            <span class="tutorial_explain_text" *ngIf="this.tutorial.tutorial_users_selected_option === this.tutorial.TUTORIAL_USER_CNR"> Crea un usuario para Caja & Recepción. </span>
        <div *ngIf="this.isnew" class="ModalInput_input">
            <b>username</b>
            <input  [(ngModel)]="this.newUser.name" type="text"/>
        </div>
        <div class="ModalInput_input" *ngIf="!this.tutorial.checkTutorialState()">
            <b>Tipo de Usuario:</b>
          <select  [(ngModel)]="this.newUser.field_tipo_de_usuario.und" class="input_select input" >
              <option selected disabled value="0">SELECT</option>
              <option value="2">recepción</option>
              <option value="3">caja</option>
              <option value="4">recepción&caja</option>
            </select>
          </div>
          <div class="ModalInput_input" *ngIf="this.tutorial.checkTutorialState()">
                <b>Tipo de Usuario:</b>
              <select  [(ngModel)]="this.newUser.field_tipo_de_usuario.und" class="input_select input" disabled>
                  <option value="2" selected  *ngIf="this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_RECEPCION">recepción</option>
                  <option value="3"  selected  *ngIf="this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_CAJA">caja</option>
                  <option value="4"  selected  *ngIf="this.tutorial.tutorial_users_selected_option === this.tutorial.TUTORIAL_USER_CNR">recepción&caja</option>
                </select>
              </div>
          <div class="ModalInput_input">
            <b>Correo Electrónico</b>
            <input [(ngModel)]="this.newUser.field_useremail.und[0].email" type="text"/>
        </div>
        <div *ngIf="this.isnew" class="ModalInput_input">
            <b>Confirmar Correo Electrónico</b>
            <input [(ngModel)]="this.newUser.mail" type="text"/>
        </div>
        <div class="ModalInput_input">
            <b>Contraseña</b>
            <input [(ngModel)]="this.newUser.pass" type="password"/>
        </div>
        <div class="ModalInput_input">
            <b>Confirmar Contraseña</b>
            <input [(ngModel)]="this.checkpass" type="password"/>
        </div>
        <div class="midAlign">
            <div class="register_button_section">
                
            <button *ngIf="this.isnew"  (click)="createUserd()" class="bgColorSecondary generalButton">Agregar</button>
            <button *ngIf="!this.isnew" (click)="updateUserd()"  class="bgColorSecondary generalButton">Actualizar</button>
            </div>
          </div>

    </div>
  
    </div>

    <div class="modalContent" style="text-align: center;" *ngIf="this.tutorial.checkTutorialState() && this.tutorial.usuarioCreated" >
            <span class="spanBlock bigBoldFont">!Felicidades!</span>
            <span class="spanBlock midMainFont"> Tu Usuario ha sido creado.</span>
            <span class="spanBlock midSubFont">Te proporcionamos sus datos para que pueda ingresar desde este momento a DRAP</span>
            <span class="spanBlock midSubFont">Nombre: <span class="fontHigh">{{this.newUser.name}}</span></span>
            <span class="spanBlock midSubFont">Correo: <span class="fontHigh">{{this.newUser.mail}}</span></span>
            <span class="spanBlock midSubFont" *ngIf="!this.codeuserNP">Contraseña: <span class="fontHigh">{{this.checkpass}}</span></span>
            <span class="spanBlock midSubFont"> Puedes modificar este y/o agregar más usuarios siempre que lo desees en la sección de Alta de Usuarios en el menú de la Aplicación</span>
            </div>
            <div class="midAlign" *ngIf="this.tutorial.checkTutorialState() && this.tutorial.usuarioCreated">
                <div class="register_button_section">
                <button (click)="this.nextUser()"  *ngIf="this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_RECEPCION" class="bgColorSecondary generalButton">Continuar</button>
                <button (click)="this.endUsers()"  *ngIf="this.tutorial.tutorial_users_selected_option === this.tutorial.TUTORIAL_USER_CNR || this.tutorial.tutorial_user_created_step === this.tutorial.TUTORIAL_USER_STEP_CAJA" class="bgColorSecondary generalButton">Continuar</button>
                <!--<button (click)="this.restart()" class="bgColorSecondary generalButton">Crear Otro</button>-->
                <!--<button (click)="this.dismiss()" class="bgColorSecondary generalButton">Continuar</button>-->
                </div>
              </div>
</ion-content>
