

<header></header>
<ion-content padding>
  <div class="reporte_header">
    <div class="modalPage_header">
    <div class="modalPage_logo"><img src="assets/imgs/reportes.svg"/></div>
    <div class="modalPage_title">
      <span class="spanBlock midFont"><b>Resumen Diaro</b></span>
      <span class="spanBlock midSubFont">Resumen de tu actvidad durante el d√≠a de hoy</span>
    </div>
    </div>
    <div class="modalPage_toolbar">
        <div class="info_tool" *ngIf="!userData.checkUserPermission([userData.TIPO_DOCTOR]) && this.reportPresentator.docLoaded">
            <span class="spanBlock midFont"><b>Doctor</b></span>
            <span class="spanBlock fontHigh midFont">{{this.reportPresentator.docName}} / {{this.reportPresentator.docAlias}}</span>
          </div>
            <div class="info_tool">
                <span class="spanBlock midFont"><b>Fecha</b></span>
                <span class="spanBlock fontSecondary midFont">{{this.reportPresentator.actualReport.dateString}}</span>
              </div>
      <button class="bgColorSecondary generalButton export-big" (click)="generatePDF()" >Exportar</button>
    </div>
    </div>


    <div class="ReportGrid reporte-desk">
      <div class="ReporteRow" *ngFor="let cita of this.reportPresentator.actualReport.citas">
        <div class="ReporteRow_head">
            <span class="rbh_span midFont" *ngIf="cita.opendetail" (click)="setOpendetail(cita,false);"> <img src="assets/imgs/chevron-verde.svg"  class="icon_drapo_sm"> </span>
            <span class="rbh_span midFont" *ngIf="!cita.opendetail" (click)="setOpendetail(cita,true);"> <img src="assets/imgs/chrevron-rojo.svg"  class="icon_drapo_sm"> </span>
            <span class="rbh_span midFont"> <span class="bold">Paciente</span><span class="">{{ cita.paciente }}</span> </span>
            <span class="rbh_span midFont" *ngIf="!userData.checkUserPermission([userData.TIPO_DOCTOR])"> <span class="bold">Doctor</span><span class="">{{ cita.doctor_name }}</span> </span>
            <span class="rbh_span midFont"> <span class="bold">Caja</span><span class="">{{cita.caja_name}} </span> </span>
            <span class="rbh_span midFont"> <span class="bold">Duracion</span><span class="fontHigh">{{ cita.duracionText }}</span> </span>
            <span class="rbh_span midFont estado-cita-reporte"> <span class="fontHigh"  [ngStyle]="{'color':cita.stateColor}">{{ cita.getStateString() }}</span> </span>
        </div>
        <div class="ReporteRow_TotalServicios">
            <span class="rrt_span midFont"> <span class="bold">Total de Servicios</span><span class="midFont fontSecondary">${{cita.costo}}</span></span>
            <span class="rrt_span midFont"> <span class="bold">Efectivo</span><span class="midFont fontSecondary">${{cita.cobroEfectivo}}</span> </span>
            <span class="rrt_span midFont"> <span class="bold">Tarjeta</span><span class="midFont fontSecondary">${{cita.cobroTarjeta}}</span> </span>
            <span class="rrt_span midFont"> <span class="bold">Cheque</span><span class="midFont fontSecondary">${{cita.cobroCheque}}</span> </span>
            <span class="rrt_span midFont"> <span class="bold">Facturado</span><span class="midFont  fontHigh">${{cita.facturado}}</span> </span>
            <span class="rrt_span midFont" *ngIf="cita.costo > cita.cobro"> <span class="bold">Adeudo</span><span class="fontPrimary">${{cita.costo - cita.cobro}}</span> </span>
        </div>
        <div class="ReporteRow_Desglose" *ngIf="cita.opendetail">
          <div class="ReporteRow_Desglose_row midFont" *ngFor="let servicio of cita.reporteServicios">
           <span class="servicio-item">
             {{servicio.title}}: <span class="midFont fontSecondary">${{servicio.costo}}</span>
            </span> 
          </div>
        </div>
      </div>
      </div>

      <div class="ReportGrid reporte-movil">
        <div class="ReporteRow" *ngFor="let cita of this.reportPresentator.actualReport.citas">
          <div class="ReporteRow_head">
            <div class="chevrons">
              <span class="rbh_span midFont" *ngIf="cita.opendetail" (click)="setOpendetail(cita,false);"> <img src="assets/imgs/chevron-verde.svg"  class="icon_drapo_sm"> </span>
              <span class="rbh_span midFont" *ngIf="!cita.opendetail" (click)="setOpendetail(cita,true);"> <img src="assets/imgs/chrevron-rojo.svg"  class="icon_drapo_sm"> </span>
            </div>
            <div class="nombres-reporte">
              <span class="rbh_span midFont"> <span class="bold">Paciente</span><span class="">{{ cita.paciente }}</span> </span>
              <span class="rbh_span midFont" *ngIf="!userData.checkUserPermission([userData.TIPO_DOCTOR])"> <span class="bold">Doctor</span><span class="">{{ cita.doctor_name }}</span> </span>
            </div>
            <div class="totalycitas">
              <span class="rrt_span midFont"> <span class="bold">Total de Servicios</span><span class="midFont fontSecondary">${{cita.costo}}</span></span>
              <span class="rbh_span midFont"> <span class="fontHigh"  [ngStyle]="{'color':cita.stateColor}">{{ cita.getStateString() }}</span> </span>
            </div>
          </div>
          
          <div class="ReporteRow_Desglose" *ngIf="cita.opendetail">
            <div class="ReporteRow_Desglose_row midFont" *ngFor="let servicio of cita.reporteServicios">
                <span class="rbh_span midFont"> <span class="bold">Caja</span><span class="">{{cita.caja_name}} </span> </span>
                <span class="rbh_span midFont"> <span class="bold">Duracion</span><span class="fontHigh">{{ cita.duracionText }}</span> </span>
                <div class="ReporteRow_TotalServicios">
                    <span class="rrt_span midFont"> <span class="bold">Efectivo</span><span class="midFont fontSecondary">${{cita.cobroEfectivo}}</span> </span>
                    <span class="rrt_span midFont"> <span class="bold">Tarjeta</span><span class="midFont fontSecondary">${{cita.cobroTarjeta}}</span> </span>
                    <span class="rrt_span midFont"> <span class="bold">Cheque</span><span class="midFont fontSecondary">${{cita.cobroCheque}}</span> </span>
                    <span class="rrt_span midFont"> <span class="bold">Facturado</span><span class="midFont  fontHigh">${{cita.facturado}}</span> </span>
                    <span class="rrt_span midFont" *ngIf="cita.costo > cita.cobro"> <span class="bold">Adeudo</span><span class="fontPrimary">${{cita.costo - cita.cobro}}</span> </span>
                </div>
             <span class="servicio-item">
               {{servicio.title}}: <span class="midFont fontSecondary">${{servicio.costo}}</span>
              </span> 
            </div>
          </div>
        </div>
        </div>

</ion-content>
